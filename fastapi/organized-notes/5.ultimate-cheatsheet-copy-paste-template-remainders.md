### üìö Reference
13. [Ultimate Analogy Cheatsheet](#ultimate-analogy-cheatsheet)
14. [Copy-Paste Template](#copy-paste-template)
15. [Critical Reminders](#critical-reminders)
16. [Installation Guide](#installation-guide)


### ‚ö° Quick Reference Card

```python
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#                    QUICK SETUP GUIDE
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

# 1Ô∏è‚É£ ENGINE (Once at startup)
from sqlalchemy import create_engine
engine = create_engine("postgresql://user:pass@host/db")

# 2Ô∏è‚É£ BASE (Once at startup)
```

## Installation Guide

### Required Installations

#### 1. **Core Dependencies**
```bash
# Install FastAPI and SQLAlchemy
pip install fastapi sqlalchemy uvicorn[standard]
```

#### 2. **Database-Specific Drivers**

**For PostgreSQL:**
```bash
# Install PostgreSQL driver
pip install psycopg2-binary

# Alternative (compiled version, faster but requires build tools)
pip install psycopg2
```

**For MySQL/MariaDB:**
```bash
# Install MySQL driver
pip install pymysql

# Alternative (faster, recommended)
pip install mysqlclient
```

**For SQLite:**
```bash
# No additional installation needed!
# SQLite comes built-in with Python
```

**For Microsoft SQL Server:**
```bash
# Install SQL Server driver
pip install pyodbc
```

**For Oracle:**
```bash
# Install Oracle driver
pip install cx_Oracle
```

#### 3. **Additional Utilities**
```bash
# Environment variable management
pip install python-dotenv

# Data validation (included with FastAPI but good to specify)
pip install pydantic

# Database migrations (optional but recommended)
pip install alembic
```

#### 4. **Complete requirements.txt**

**For PostgreSQL Project:**
```txt
# requirements.txt
fastapi==0.109.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
psycopg2-binary==2.9.9
python-dotenv==1.0.0
pydantic==2.5.3
alembic==1.13.1
```

**For MySQL Project:**
```txt
# requirements.txt
fastapi==0.109.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
pymysql==1.1.0
python-dotenv==1.0.0
pydantic==2.5.3
alembic==1.13.1
```

**For SQLite Project (Development/Testing):**
```txt
# requirements.txt
fastapi==0.109.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
python-dotenv==1.0.0
pydantic==2.5.3
alembic==1.13.1
```

#### 5. **Install All Dependencies**
```bash
# Install from requirements.txt
pip install -r requirements.txt

# Or install everything at once
pip install fastapi uvicorn[standard] sqlalchemy psycopg2-binary python-dotenv pydantic alembic
```

---

### Database Server Installation

#### **PostgreSQL Installation**

**On Ubuntu/Debian:**
```bash
# Update package list
sudo apt update

# Install PostgreSQL
sudo apt install postgresql postgresql-contrib

# Start PostgreSQL service
sudo systemctl start postgresql
sudo systemctl enable postgresql

# Check status
sudo systemctl status postgresql
```

**On macOS:**
```bash
# Using Homebrew
brew install postgresql@15

# Start PostgreSQL
brew services start postgresql@15

# Or use Postgres.app (GUI)
# Download from: https://postgresapp.com/
```

**On Windows:**
```bash
# Download installer from:
# https://www.postgresql.org/download/windows/

# Or use Docker:
docker run --name postgres-db -e POSTGRES_PASSWORD=password -p 5432:5432 -d postgres:15
```

**Create Database:**
```bash
# Switch to postgres user (Linux/Mac)
sudo -u postgres psql

# Or connect directly
psql -U postgres

# Inside psql:
CREATE DATABASE fastapi_db;
CREATE USER fastapi_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE fastapi_db TO fastapi_user;

# Exit
\q
```

#### **MySQL Installation**

**On Ubuntu/Debian:**
```bash
# Update package list
sudo apt update

# Install MySQL
sudo apt install mysql-server

# Secure installation
sudo mysql_secure_installation

# Start MySQL
sudo systemctl start mysql
sudo systemctl enable mysql
```

**On macOS:**
```bash
# Using Homebrew
brew install mysql

# Start MySQL
brew services start mysql

# Secure installation
mysql_secure_installation
```

**On Windows:**
```bash
# Download installer from:
# https://dev.mysql.com/downloads/installer/

# Or use Docker:
docker run --name mysql-db -e MYSQL_ROOT_PASSWORD=password -p 3306:3306 -d mysql:8
```

**Create Database:**
```sql
# Connect to MySQL
mysql -u root -p

# Inside MySQL:
CREATE DATABASE fastapi_db;
CREATE USER 'fastapi_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON fastapi_db.* TO 'fastapi_user'@'localhost';
FLUSH PRIVILEGES;

# Exit
exit;
```

#### **SQLite Installation**

```bash
# SQLite comes pre-installed with Python!
# No separate installation needed

# Verify installation
python -c "import sqlite3; print(sqlite3.sqlite_version)"

# Database file will be created automatically when you run your app
```

---

### Database Connection Strings

#### **Connection String Format**
```
dialect+driver://username:password@host:port/database
```

#### **PostgreSQL**
```python
# Local PostgreSQL
DATABASE_URL = "postgresql://fastapi_user:password@localhost:5432/fastapi_db"

# PostgreSQL with psycopg2 (explicit driver)
DATABASE_URL = "postgresql+psycopg2://user:password@localhost:5432/fastapi_db"

# Remote PostgreSQL (Heroku, AWS RDS, etc.)
DATABASE_URL = "postgresql://user:password@hostname.region.rds.amazonaws.com:5432/dbname"

# PostgreSQL with SSL
DATABASE_URL = "postgresql://user:password@host:5432/db?sslmode=require"
```

#### **MySQL/MariaDB**
```python
# Local MySQL
DATABASE_URL = "mysql://fastapi_user:password@localhost:3306/fastapi_db"

# MySQL with PyMySQL (explicit driver)
DATABASE_URL = "mysql+pymysql://user:password@localhost:3306/fastapi_db"

# MySQL with mysqlclient
DATABASE_URL = "mysql+mysqldb://user:password@localhost:3306/fastapi_db"

# MySQL with charset
DATABASE_URL = "mysql://user:password@localhost:3306/db?charset=utf8mb4"
```

#### **SQLite**
```python
# SQLite file database (relative path)
DATABASE_URL = "sqlite:///./fastapi.db"

# SQLite file database (absolute path)
DATABASE_URL = "sqlite:////absolute/path/to/fastapi.db"

# SQLite in-memory database (testing)
DATABASE_URL = "sqlite:///:memory:"

# Windows path
DATABASE_URL = "sqlite:///C:/path/to/fastapi.db"
```

#### **Microsoft SQL Server**
```python
# SQL Server with pyodbc
DATABASE_URL = "mssql+pyodbc://user:password@host:1433/database?driver=ODBC+Driver+17+for+SQL+Server"

# SQL Server with Windows Authentication
DATABASE_URL = "mssql+pyodbc://host/database?trusted_connection=yes&driver=ODBC+Driver+17+for+SQL+Server"
```

#### **Oracle**
```python
# Oracle with cx_Oracle
DATABASE_URL = "oracle+cx_oracle://user:password@host:1521/?service_name=ORCL"
```

---

### Docker Setup (Optional but Recommended)

#### **PostgreSQL with Docker**
```bash
# Create and run PostgreSQL container
docker run --name fastapi-postgres \
  -e POSTGRES_USER=fastapi_user \
  -e POSTGRES_PASSWORD=your_password \
  -e POSTGRES_DB=fastapi_db \
  -p 5432:5432 \
  -v postgres_data:/var/lib/postgresql/data \
  -d postgres:15

# Connection string
DATABASE_URL="postgresql://fastapi_user:your_password@localhost:5432/fastapi_db"
```

#### **MySQL with Docker**
```bash
# Create and run MySQL container
docker run --name fastapi-mysql \
  -e MYSQL_ROOT_PASSWORD=root_password \
  -e MYSQL_DATABASE=fastapi_db \
  -e MYSQL_USER=fastapi_user \
  -e MYSQL_PASSWORD=your_password \
  -p 3306:3306 \
  -v mysql_data:/var/lib/mysql \
  -d mysql:8

# Connection string
DATABASE_URL="mysql://fastapi_user:your_password@localhost:3306/fastapi_db"
```

#### **Docker Compose Setup**
```yaml
# docker-compose.yml
version: '3.8'

services:
  postgres:
    image: postgres:15
    container_name: fastapi-postgres
    environment:
      POSTGRES_USER: fastapi_user
      POSTGRES_PASSWORD: your_password
      POSTGRES_DB: fastapi_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U fastapi_user"]
      interval: 10s
      timeout: 5s
      retries: 5

  fastapi:
    build: .
    container_name: fastapi-app
    environment:
      DATABASE_URL: postgresql://fastapi_user:your_password@postgres:5432/fastapi_db
    ports:
      - "8000:8000"
    depends_on:
      postgres:
        condition: service_healthy
    volumes:
      - .:/app

volumes:
  postgres_data:
```

```bash
# Start services
docker-compose up -d

# Stop services
docker-compose down

# View logs
docker-compose logs -f
```

---

### Verification Steps

#### **1. Test Database Connection**
```python
# test_connection.py
from sqlalchemy import create_engine, text
import os

DATABASE_URL = os.getenv("DATABASE_URL", "postgresql://user:password@localhost:5432/fastapi_db")

try:
    engine = create_engine(DATABASE_URL)
    with engine.connect() as connection:
        result = connection.execute(text("SELECT 1"))
        print("‚úÖ Database connection successful!")
        print(f"Result: {result.scalar()}")
except Exception as e:
    print(f"‚ùå Database connection failed: {e}")
```

```bash
# Run test
python test_connection.py
```

#### **2. Verify Python Packages**
```bash
# Check installed packages
pip list | grep -E "fastapi|sqlalchemy|psycopg2|uvicorn"

# Expected output:
# fastapi              0.109.0
# sqlalchemy           2.0.25
# psycopg2-binary      2.9.9
# uvicorn              0.27.0
```

#### **3. Test FastAPI Server**
```bash
# Start server
uvicorn main:app --reload

# Should see:
# INFO:     Uvicorn running on http://127.0.0.1:8000
# INFO:     Application startup complete.
```

---

### Troubleshooting Installation Issues

#### **PostgreSQL Driver Issues**

**Error: `pg_config executable not found`**
```bash
# Ubuntu/Debian
sudo apt-get install libpq-dev python3-dev

# macOS
brew install postgresql

# Then reinstall
pip install psycopg2
```

**Error: `psycopg2 not found`**
```bash
# Use binary version (easier)
pip uninstall psycopg2
pip install psycopg2-binary
```

#### **MySQL Driver Issues**

**Error: `mysql_config not found`**
```bash
# Ubuntu/Debian
sudo apt-get install libmysqlclient-dev python3-dev

# macOS
brew install mysql

# Then reinstall
pip install mysqlclient
```

**Alternative: Use PyMySQL (pure Python, no compilation)**
```bash
pip install pymysql
```

```python
# Use in connection string
DATABASE_URL = "mysql+pymysql://user:password@localhost:3306/db"
```

#### **SQLite Issues**

**Error: `unable to open database file`**
```python
# Ensure directory exists
import os
os.makedirs("./database", exist_ok=True)

# Use absolute path
DATABASE_URL = "sqlite:///./database/fastapi.db"
```

#### **Connection Issues**

**Error: `could not connect to server`**
```bash
# Check if database is running
# PostgreSQL
sudo systemctl status postgresql

# MySQL
sudo systemctl status mysql

# Check port
netstat -tuln | grep 5432  # PostgreSQL
netstat -tuln | grep 3306  # MySQL
```

**Error: `password authentication failed`**
```bash
# Reset PostgreSQL password
sudo -u postgres psql
ALTER USER postgres PASSWORD 'newpassword';

# Reset MySQL password
sudo mysql
ALTER USER 'root'@'localhost' IDENTIFIED BY 'newpassword';
FLUSH PRIVILEGES;
```

---
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()

# 3Ô∏è‚É£ MODEL (Define tables)
from sqlalchemy
